{% load static %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <!-- Auth Modal (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ) -->
    <div class="modal" id="authModal" style="display: block;">
        <div class="auth-modal-content">
            <div class="auth-tabs">
                <button class="tab-btn active" onclick="switchTab('login')">–í–æ–π—Ç–∏</button>
                <button class="tab-btn" onclick="switchTab('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            </div>

            <!-- Login Form -->
            <div id="loginTab" class="tab-content active">
                <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
                <form id="loginForm">
                    <input type="text" id="loginUsername" placeholder="Username" required>
                    <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
                    <div id="loginError" class="error-message"></div>
                    <button type="submit" class="btn-primary">–í–æ–π—Ç–∏</button>
                </form>
            </div>

            <!-- Register Form -->
            <div id="registerTab" class="tab-content">
                <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                <form id="registerForm">
                    <input type="text" id="registerUsername" placeholder="Username" required>
                    <input type="email" id="registerEmail" placeholder="Email" required>
                    <input type="password" id="registerPassword" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤)" required minlength="8">
                    <input type="password" id="registerPasswordConfirm" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                    <div id="registerError" class="error-message"></div>
                    <button type="submit" class="btn-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main App (—Å–∫—Ä—ã—Ç –¥–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏) -->
    <div id="app" style="display: none;">
        <div class="container">
            <!-- Header -->
            <header class="header">
                <h1>üìù Task Manager</h1>
                <div class="header-right">
                    <span id="currentUser">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                    <button class="btn-logout" id="logoutBtn">–í—ã–π—Ç–∏</button>
                </div>
            </header>

            <!-- Task Modal -->
            <div class="modal" id="taskModal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2 id="taskTitle">-</h2>
                    <div class="task-details">
                        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong></p>
                        <p id="taskDescription">-</p>
                        <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span id="taskStatus" class="status-badge">-</span></p>
                        <p><strong>–î–µ–¥–ª–∞–π–Ω:</strong> <span id="taskDeadline">-</span></p>
                        <p><strong>–°–æ–∑–¥–∞–Ω–æ:</strong> <span id="taskCreated">-</span></p>
                        <p><strong>–û–±–Ω–æ–≤–ª–µ–Ω–æ:</strong> <span id="taskUpdated">-</span></p>
                    </div>
                </div>
            </div>

            <!-- Add Task Form -->
            <div class="add-task">
                <input type="text" id="taskTitleInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" class="input-field">
                <textarea id="taskDescriptionInput" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤)" class="input-field"></textarea>
                <input type="date" id="taskDeadlineInput" class="input-field">
                <button class="btn-add" id="addTaskBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
            </div>

            <!-- Kanban Board -->
            <div class="kanban-board">
                <!-- To Do Column -->
                <div class="column" id="todo-column">
                    <h2 class="column-title todo">To Do</h2>
                    <div class="task-list" id="todo-list"></div>
                </div>

                <!-- In Progress Column -->
                <div class="column" id="inprogress-column">
                    <h2 class="column-title inprogress">In Progress</h2>
                    <div class="task-list" id="inprogress-list"></div>
                </div>

                <!-- Done Column -->
                <div class="column" id="done-column">
                    <h2 class="column-title done">Done</h2>
                    <div class="task-list" id="done-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>